<html>

<head>
<title>VieleRETS Documentation</title>
<link rel="stylesheet" type="text/css" href="./resources/styles.css">
</head>

<body topmargin="0" leftmargin="0" marginwidth="0" marginheight="0">

<table border="0" cellspacing="10" cellpadding="0">





<!-- header -->

<tr align="left">
<td>

<table border="0" cellspacing="0" cellpadding="0">

<tr>

<!-- logo -->
<td>
<table border="0" cellspacing="0" cellpadding="0">
<tr><td><img src="./resources/viele_logo.gif"></td></tr>
<tr><td><br/></td></tr>
</table>
</td>
<!-- logo -->

<!-- document block -->
<td>

<table border="2" cellspacing="0" cellpadding="5">

<tr>
<td id="docheading">
Project Name
</td>
<td id="doctext">
VieleRETS 1.1 
</td>
</tr>

<tr>
<td id="docheading">
Publication Name
</td>
<td id="doctext">
Configuration Guide
</td>
</tr>

<tr>
<td id="docheading">
Publication Date
</td>
<td id="doctext">
May 2006
</td>
</tr>

<tr>
<td id="docheading">
Maintainer
</td>
<td id="doctext">
mlesswing@realtors.org
</td>
</tr>

</table>
</td>
<!-- document block -->

</tr>

</table>
</td>

</tr>

<!-- header -->




<tr>
<td>

<table border="0" cellspacing="10" cellpadding="0">
<tr>

<td>
<a href="./configurationGuide.html">Configuration Guide</a>
</td>

<td>
<a href="./index.html">Table of Contents</a>
</td>

</tr>
</table>

</td>
</tr>






<!-- command line usage -->

<tr>
<td>
<table border="0" cellspacing="10" cellpadding="0">

<tr>
<td id="sectionheading">
5.0 Command Line Usage 
</td>
</tr>

<tr>
<td>
<table border="0" cellspacing="10" cellpadding="0">

  <tr>
  <td id="sectiontext">

The package can also be executed from the command line with either
<a href="#interactive">interactive</a>
or
<a href="#batch_file">batch file</a>
control.  The same script is called for both purposes and is called
<a href="./installDistribution.html#installation_directory">{<var>INSTALLATION_DIRECTORY</var>}</a>
/run_interactive_job.php.  Usage notes for each mode are included below.
 
</td>
</tr>


<tr>
<td>
  <table border="0" cellspacing="10" cellpadding="0">

<!--         -->
    <tr>
    <td>
    <table border="1">

    <tr>
    <td id="sectionheading">
<a name="interactive">Interactive Control</a>
      <table border="0" cellspacing="10" cellpadding="0">
      <tr>
      <td id="sectionText">

The package can be executed from the command line and you will be prompted for
the following items if you do not supply any arguments: 

<ul>

<li><b>EXTRACT</b> - The name of <var>Extract</var> to use.  This information 
is required.  If you do not specify a value, processing stops.
<br/><br/>
</li>
 
<li><b>QUERY_VALUE</b> - You will be prompted for a value for each available
query field in DMQL notation.  If no information is supplied, the package 
generates a NULL query.
</li>
 
</ul>
 
To suppress HTML artifacts generated by
PHP, a suggested execution of the script would look like:
<xmp>php -f ./run_interactive_job.php</xmp>
Note the use of the <var>-f</var> flag to denote the script.  You could also
run the script with the <var>-q</var> flag (quiet mode) like this: 
<xmp>php -q ./run_interactive_job.php</xmp>
With the setting of the register_argc_argv to Off (to increase performance)
in the php.ini file it is possible to cause errors when running from the 
command line.  To bypass the php.ini file you can include the -n argument
when calling the tools this looks like:  
<xmp>php -n -f ./run_interactive_job.php</xmp>
or
<xmp>php -n -q ./run_interactive_job.php</xmp>
      </td>
      </tr>

      </table>

    </td>
    </tr>

    </table>
    </td>
    </tr>

<!--         -->
    <tr>
    <td>
    <table border="1">

    <tr>
    <td id="sectionheading">
<a name="batch_file">Batch File Control</a>
      <table border="0" cellspacing="10" cellpadding="0">
      <tr>
      <td id="sectionText">

A Batch Control File is created for for each 
extract and is located in an XML formatted file found at  
<a href="./installDistribution.html#installation_directory">{<var>INSTALLATION_DIRECTORY</var>}</a> 
/ 
<a href="./installDistribution.html#bcf_directory">{<var>BCF_DIRECTORY</var>}</a> 
/{<var>EXTRACT_NAME</var>}.  By default, the <var>QUIET</var> and <var>UPDATE_ONLY</var>
tags are commented out.  

<br/><br/>

The following items are specified in a <var>Batch File Control</var>: 

<ul>

<li><b>EXTRACT</b> - The name of <var>Extract</var> to use.  This element
is required.  
<br/><br/>
</li>
 
<li><b>QUERY_VALUE</b> - You should include one tag for each element you want
to be used.  The attribute <var>name</var> is used to identify the element.
The data for the tag is the query value in DMQL notation.  The element is
not required.  If no tags are specified, the package generates a NULL query.
If you specify an attribute <var>type</var> and set it to the value ADVANCED,
the tage value will override any other QUERY_VALUE tags.  Using this 
<a href="#advanced_query"><var>Advanced Query</var></a> 
capability is entirely a manual process only achieved by editing the Batch 
Control File by hand.
<br/><br/>
</li>
 
<li><b>QUIET</b> - The presence of this tag denotes that only error messages
should be sent to standard output.  You should include this tag if you plan to
use that package with packages like <var>cron</var>.  By default, this tag is
commented out.
<br/><br/>
</li>
 
<li><b>UPDATE_BCF</b> - The presence of this tag denotes that the Batch Control
File should be updated from the Interactive Mode.  By default, this tag is 
not commented out.
<br/><br/>
</li>
 
<li><b>UPDATE_ONLY</b> - The presence of this tag denotes that only listings
that have changed since the LAST_RUN date will be fetched.  You should include
this tag if you plan to use that package with packages like <var>cron</var> and
you only want "deltas".  By default, this tag is commented out.
<br/><br/>
</li>
 
<li><b>LAST_RUN</b> - The timestamp of the last successful fetch.  This value is
updated by both the command line and browser-based modes.
<br/><br/>
</li>
 
<li><b>LIMIT</b> - The number of records to fetch.  This value is
updated by both the command line and browser-based modes and overrides settings
from the EXTRACT definition.
</li>

</ul>
 
The package will be executed from the command line using the contents of the
Batch Control File for script input.  To suppress HTML artifacts generated by
PHP, a suggested execution of the script would look like:
<xmp>php -f ./run_interactive_job.php batch_control_files/Default</xmp>
Note the use of the <var>-f</var> flag to denote the script.  you could also
run the script with the <var>-q</var> flag (quiet mode) like this: 
<xmp>php -q ./run_interactive_job.php batch_control_files/Default</xmp>

      </td>
      </tr>

      </table>

    </td>
    </tr>

    </table>
    </td>
    </tr>

<!--         -->
    <tr>
    <td id="sectionheading">
<a name="advanced_query">Advanced Query Processing</a>
      <table border="0" cellspacing="10" cellpadding="0">
      <tr>
      <td id="sectionText">

The GUI supplied with the package can be limiting to some power users.  
Complex queries cannot be defined.  If you know the RETS DMQL language, complex
queries can be defined directly in the Batch Control File.  To take advanatge 
of this <var>Advanced Query</var> feature, you will need to make manual changes to the
Batch Control File.

<br/><br/>

I typical Batch Control File might look like this:

<xmp><VIELE_BATCH>
        <EXTRACT>
Default
        </EXTRACT>
        <UPDATE_BCF/>
        <QUERY_VALUE name="ListingID">
        </QUERY_VALUE>
        <LAST_RUN>
2006-05-09T17:33:35
        </LAST_RUN>
</VIELE_BATCH>
</xmp>

Because no value is specified for the "ListingID" argument, all listings would
be returned.

<br/><br/>

With the addition of a single line, the <var>Advanced Query</var> feature can 
be invoked.  Adding a QUERY_VALUE tag with an attribute called <var>type</var>
set to <var>ADVANCED</var> directs the package to disregard all subsequent 
query processing information.  An example of a Batch Control File that has 
been altered to use the <var>Advanced Query</var> feature is:

<xmp><VIELE_BATCH>
        <EXTRACT>
Default
        </EXTRACT>
        <UPDATE_BCF/>
        <QUERY_VALUE type="ADVANCED">
(ListingID=localhost-101)
        </QUERY_VALUE>
        <LAST_RUN>
2006-05-09T17:33:35
        </LAST_RUN>
</VIELE_BATCH>
</xmp>

In this example, the user has used the <var>Advanced Query</var> feature to
change the query to return only a single listing, in this case, the listing
with the MLS ID "localhost-101".

<br/><br/>

It is important to note that Batch Control Files altered in this way override 
all GUI processing as well.  Once manually modified, changes to queries 
specified with the GUI have not effect.

      </td>
      </tr>

      </table>

    </td>
    </tr>

<!--         -->
</table>
</td>
</tr>
</table>


<!-- command line usage -->






<tr>
<td>

<table border="0" cellspacing="10" cellpadding="0">
<tr>

<td>
<a href="./configurationGuide.html">Configuration Guide</a>
</td>

<td>
<a href="./index.html">Table of Contents</a>
</td>

</tr>
</table>

</td>
</tr>







</table>

</body>

</html>
